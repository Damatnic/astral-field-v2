{
  "timestamp": "2025-09-26T22:01:20.057Z",
  "focus": "Authentication Login Redirect Issue",
  "summary": {
    "totalTests": 9,
    "passed": 0,
    "failed": 9,
    "totalDuration": 36471
  },
  "results": [
    {
      "name": "Session Establishment Unit Tests",
      "passed": false,
      "duration": 9343,
      "details": "Command failed: npm run test:auth -- --testNamePattern=\"Session Establishment\"\nFAIL __tests__/components/auth/signin-form.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/auth-config.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/security/auth-security.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nJest: \"global\" coverage threshold for statements (95%) not met: 0%\nJest: \"global\" coverage threshold for branches (90%) not met: 0%\nJest: \"global\" coverage threshold for lines (95%) not met: 0%\nJest: \"global\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for statements (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for branches (85%) not met: 0%\nJest: \"./src/components/\" coverage threshold for lines (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for functions (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for functions (100%) not met: 0%\nTest Suites: 3 failed, 3 total\nTests:       0 total\nSnapshots:   0 total\nTime:        4.463 s\nRan all test suites matching /__tests__\\\\(components\\\\auth|integration\\\\auth|security\\\\auth)/i with tests matching \"Session Establishment\".\nnpm error Lifecycle script `test:auth` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c jest --testPathPattern=\"__tests__/(components/auth|integration/auth|security/auth)\" ^^^\"--testNamePattern=Session^^^ Establishment^^^\"\n"
    },
    {
      "name": "Login Form Component Tests",
      "passed": false,
      "duration": 8308,
      "details": "Command failed: npm run test:unit -- --testPathPattern=\"signin-form.test\"\nFAIL __tests__/components/players/player-list.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/lib/utils.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/auth/signin-form.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/draft/draft-room.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/live/live-scoring-dashboard.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/team/lineup-manager.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/lib/auth.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/ai/ai-coach.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/chat/league-chat.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/components/dashboard/sidebar.test.tsx\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nJest: \"global\" coverage threshold for statements (95%) not met: 0%\nJest: \"global\" coverage threshold for branches (90%) not met: 0%\nJest: \"global\" coverage threshold for lines (95%) not met: 0%\nJest: \"global\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for statements (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for branches (85%) not met: 0%\nJest: \"./src/components/\" coverage threshold for lines (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for functions (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for functions (100%) not met: 0%\nTest Suites: 10 failed, 10 total\nTests:       0 total\nSnapshots:   0 total\nTime:        3.929 s\nRan all test suites matching /__tests__\\\\(components|lib|utils)|signin-form.test/i.\nnpm error Lifecycle script `test:unit` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c jest --testPathPattern=\"__tests__/(components|lib|utils)\" --testPathPattern=signin-form.test\n"
    },
    {
      "name": "NextAuth Integration Tests",
      "passed": false,
      "duration": 7835,
      "details": "Command failed: npm run test:integration -- --testPathPattern=\"auth-config.test\"\nFAIL __tests__/integration/auth-config.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/session-management.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/api/teams.integration.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/api/auth.integration.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nJest: \"global\" coverage threshold for statements (95%) not met: 0%\nJest: \"global\" coverage threshold for branches (90%) not met: 0%\nJest: \"global\" coverage threshold for lines (95%) not met: 0%\nJest: \"global\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for statements (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for branches (85%) not met: 0%\nJest: \"./src/components/\" coverage threshold for lines (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for functions (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for functions (100%) not met: 0%\nTest Suites: 4 failed, 4 total\nTests:       0 total\nSnapshots:   0 total\nTime:        3.438 s\nRan all test suites matching /__tests__\\\\integration|auth-config.test/i.\nnpm error Lifecycle script `test:integration` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c jest --testPathPattern=\"__tests__/integration\" --testPathPattern=auth-config.test\n"
    },
    {
      "name": "Middleware Route Protection",
      "passed": false,
      "duration": 7911,
      "details": "Command failed: npm run test:integration -- --testPathPattern=\"session-management.test\"\nFAIL __tests__/integration/api/teams.integration.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/session-management.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/api/auth.integration.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nFAIL __tests__/integration/auth-config.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'mockPrismaClient' before initialization\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m   \n     \u001b[90m 103 |\u001b[39m   \u001b[90m// Extensions\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m   $extends\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(mockPrismaClient)\u001b[33m,\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m }\n     \u001b[90m 106 |\u001b[39m\n     \u001b[90m 107 |\u001b[39m \u001b[90m// Mock the Prisma module\u001b[39m\u001b[0m\n\n      at Object.mockPrismaClient (__tests__/setup/prisma.setup.js:104:39)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nJest: \"global\" coverage threshold for statements (95%) not met: 0%\nJest: \"global\" coverage threshold for branches (90%) not met: 0%\nJest: \"global\" coverage threshold for lines (95%) not met: 0%\nJest: \"global\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for statements (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for branches (85%) not met: 0%\nJest: \"./src/components/\" coverage threshold for lines (95%) not met: 0%\nJest: \"./src/components/\" coverage threshold for functions (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/lib/\" coverage threshold for functions (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for statements (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for branches (95%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for lines (100%) not met: 0%\nJest: \"./src/app/api/\" coverage threshold for functions (100%) not met: 0%\nTest Suites: 4 failed, 4 total\nTests:       0 total\nSnapshots:   0 total\nTime:        3.442 s\nRan all test suites matching /__tests__\\\\integration|session-management.test/i.\nnpm error Lifecycle script `test:integration` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c jest --testPathPattern=\"__tests__/integration\" --testPathPattern=session-management.test\n"
    },
    {
      "name": "Critical Session Establishment E2E",
      "passed": false,
      "duration": 1126,
      "details": "Command failed: npm run test:e2e -- --grep \"should establish session properly and redirect after login\"\nError: Cannot find module './e2e/global-setup.ts'\nRequire stack:\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\@playwright\\test\\cli.js\n    at Function.<anonymous> (node:internal/modules/cjs/loader:1401:15)\n    at Function.resolveFilename [as _resolveFilename] (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\transform\\transform.js:240:36)\n    at Function.resolve (node:internal/modules/helpers:145:19)\n    at resolveScript (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:255:18)\n    at C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:69:128\n    at Array.map (<anonymous>)\n    at new FullConfigInternal (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:69:117)\n    at loadConfig (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\configLoader.js:121:22)\n    at loadConfigFromFile (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\configLoader.js:331:10)\n    at runTests (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js:145:18)\n    at i.<anonymous> (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js:64:7) {\n  code: 'MODULE_NOT_FOUND',\n  requireStack: [\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\playwright\\\\lib\\\\common\\\\config.js',\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\playwright\\\\lib\\\\program.js',\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\@playwright\\\\test\\\\cli.js'\n  ]\n}\nnpm error Lifecycle script `test:e2e` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c playwright test --grep ^^^\"should^^^ establish^^^ session^^^ properly^^^ and^^^ redirect^^^ after^^^ login^^^\"\n"
    },
    {
      "name": "Demo User Quick Login E2E",
      "passed": false,
      "duration": 969,
      "details": "Command failed: npm run test:e2e -- --grep \"Demo User Quick Login\"\nError: Cannot find module './e2e/global-setup.ts'\nRequire stack:\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\@playwright\\test\\cli.js\n    at Function.<anonymous> (node:internal/modules/cjs/loader:1401:15)\n    at Function.resolveFilename [as _resolveFilename] (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\transform\\transform.js:240:36)\n    at Function.resolve (node:internal/modules/helpers:145:19)\n    at resolveScript (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:255:18)\n    at C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:69:128\n    at Array.map (<anonymous>)\n    at new FullConfigInternal (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:69:117)\n    at loadConfig (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\configLoader.js:121:22)\n    at loadConfigFromFile (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\configLoader.js:331:10)\n    at runTests (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js:145:18)\n    at i.<anonymous> (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js:64:7) {\n  code: 'MODULE_NOT_FOUND',\n  requireStack: [\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\playwright\\\\lib\\\\common\\\\config.js',\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\playwright\\\\lib\\\\program.js',\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\@playwright\\\\test\\\\cli.js'\n  ]\n}\nnpm error Lifecycle script `test:e2e` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c playwright test --grep ^^^\"Demo^^^ User^^^ Quick^^^ Login^^^\"\n"
    },
    {
      "name": "Manual Login Flow E2E",
      "passed": false,
      "duration": 979,
      "details": "Command failed: npm run test:e2e -- --grep \"Manual Login Flow\"\nError: Cannot find module './e2e/global-setup.ts'\nRequire stack:\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js\n- C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\@playwright\\test\\cli.js\n    at Function.<anonymous> (node:internal/modules/cjs/loader:1401:15)\n    at Function.resolveFilename [as _resolveFilename] (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\transform\\transform.js:240:36)\n    at Function.resolve (node:internal/modules/helpers:145:19)\n    at resolveScript (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:255:18)\n    at C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:69:128\n    at Array.map (<anonymous>)\n    at new FullConfigInternal (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\config.js:69:117)\n    at loadConfig (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\configLoader.js:121:22)\n    at loadConfigFromFile (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\common\\configLoader.js:331:10)\n    at runTests (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js:145:18)\n    at i.<anonymous> (C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\node_modules\\playwright\\lib\\program.js:64:7) {\n  code: 'MODULE_NOT_FOUND',\n  requireStack: [\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\playwright\\\\lib\\\\common\\\\config.js',\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\playwright\\\\lib\\\\program.js',\n    'C:\\\\Users\\\\damat\\\\_REPOS\\\\ASTRAL_FIELD_V1\\\\node_modules\\\\@playwright\\\\test\\\\cli.js'\n  ]\n}\nnpm error Lifecycle script `test:e2e` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error workspace @astralfield/web@3.0.0\nnpm error location C:\\Users\\damat\\_REPOS\\ASTRAL_FIELD_V1\\apps\\web\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c playwright test --grep ^^^\"Manual^^^ Login^^^ Flow^^^\"\n"
    },
    {
      "name": "Session Flow Logic Validation",
      "passed": false,
      "duration": 0,
      "details": "Some session tests missing or failing"
    },
    {
      "name": "Coverage Requirements",
      "passed": false,
      "duration": 0,
      "details": "Coverage test execution failed"
    }
  ],
  "recommendations": [
    "Fix failing tests before deploying to production.",
    "Address issues in: Session Establishment Unit Tests",
    "Address issues in: Login Form Component Tests",
    "Address issues in: NextAuth Integration Tests",
    "Address issues in: Middleware Route Protection",
    "Address issues in: Critical Session Establishment E2E",
    "Address issues in: Demo User Quick Login E2E",
    "Address issues in: Manual Login Flow E2E",
    "Address issues in: Session Flow Logic Validation",
    "Address issues in: Coverage Requirements",
    "Increase test coverage to meet Zenith quality standards (95% statements, 90% branches).",
    "Run E2E tests in staging environment before production deployment.",
    "Set up continuous monitoring for authentication flow performance."
  ],
  "loginRedirectFix": {
    "implemented": true,
    "testsCovering": [
      "Session establishment retry mechanism",
      "Hard navigation after session ready",
      "Callback URL handling",
      "Loading state management",
      "Error recovery"
    ]
  }
}